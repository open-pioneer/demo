var o=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)};var v=(t,e,i)=>(o(t,e,"read from private field"),i?i.call(t):e.get(t)),c=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},m=(t,e,i,n)=>(o(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i);var l=(t,e,i)=>(o(t,e,"access private method"),i);import"./modulepreload-polyfill-ec808ebb.js";import{c as g,r as d,b as r,j as u,a as T}from"./ObservableBox-db5c1a3b.js";import{E as A}from"./events-960f2965.js";import{u as b}from"./hooks-5ee6e0a5.js";import{C as z,H as E,T as y,B as C}from"./chunk-SRMZVY4F-6db40e68.js";import{V as q}from"./chunk-MUMUYFOI-8d4d8cf3.js";class j{textService;constructor(e){this.textService=e.references.textService}async getApiMethods(){return{changeText:e=>{this.textService.setText(e)}}}}class M extends A{text="not yet set";setText(e){const i=this.text;this.text=e,this.emit("text-changed",{newText:this.text,oldText:i})}getText(){return this.text}}class I{async getApiMethods(){return{justAnotherApiMethod:()=>{console.log("justAnotherApiMethod")}}}}var s,a,p;class _{constructor({references:e}){c(this,a);c(this,s,void 0);m(this,s,e.ctx)}emitEvent(e,i=null){if(e==null)return;if(e instanceof Event){l(this,a,p).call(this,e);return}const n=new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:i});l(this,a,p).call(this,n)}}s=new WeakMap,a=new WeakSet,p=function(e){v(this,s).getHostElement().dispatchEvent(e)};const k={"api-app":{name:"api-app",services:{TextApiExtension:{name:"TextApiExtension",clazz:j,provides:[{name:"integration.ApiExtension",qualifier:void 0}],references:{textService:{name:"api-app.TextService",qualifier:void 0,all:!1}}},TextService:{name:"TextService",clazz:M,provides:[{name:"api-app.TextService",qualifier:void 0}],references:{}},SecondApiExtension:{name:"SecondApiExtension",clazz:I,provides:[{name:"integration.ApiExtension",qualifier:void 0}],references:{}}},ui:{references:[{name:"api-app.TextService",qualifier:void 0,all:!1},{name:"integration.ExternalEventService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/integration":{name:"@open-pioneer/integration",services:{ExternalEventServiceImpl:{name:"ExternalEventServiceImpl",clazz:_,provides:[{name:"integration.ExternalEventService",qualifier:void 0}],references:{ctx:{name:"runtime.ApplicationContext",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{}}},w="",B=g(w),H=Object.freeze(Object.defineProperty({__proto__:null,packages:k,styles:B},Symbol.toStringTag,{value:"Module"})),P="api-app",f=b.bind(void 0,P);function V(){const t=f("integration.ExternalEventService"),e=()=>{t.emitEvent("my-custom-event",{data:"my-event-data"})},i=f("api-app.TextService"),[n,x]=d.useState("");return d.useEffect(()=>{x(i.getText());const h=i.on("text-changed",S=>{x(S.newText)});return()=>h.destroy()},[i]),r(z,{children:u(q,{children:[r(E,{size:"md",children:"Emitting Events"}),r(y,{children:"Click this button to emit a browser event:"}),r(C,{onClick:e,children:"Emit Event"}),r(E,{size:"md",pt:20,children:"React to api calls from outer site"}),u("div",{children:["Current text: ",n]})]})})}const D=T({component:V,appMetadata:H});customElements.define("api-app",D);
