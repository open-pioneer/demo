var a=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var x=(t,e,n)=>(a(t,e,"read from private field"),n?n.call(t):e.get(t)),c=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},m=(t,e,n,i)=>(a(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var p=(t,e,n)=>(a(t,e,"access private method"),n);import{c as g,r as u,j as r,a as d,b as T}from"./ObservableBox-732c3e57.js";import{E as A}from"./events-960f2965.js";import{u as b}from"./hooks-eaa8825a.js";import{C as z,H as f,T as y}from"./chunk-SRMZVY4F-2e962f7c.js";import{V as C}from"./chunk-MUMUYFOI-6328763f.js";import{B as q}from"./chunk-NAA7TEES-eeec8700.js";class M{textService;constructor(e){this.textService=e.references.textService}async getApiMethods(){return{changeText:e=>{this.textService.setText(e)}}}}class j extends A{text="not yet set";setText(e){const n=this.text;this.text=e,this.emit("text-changed",{newText:this.text,oldText:n})}getText(){return this.text}}class k{async getApiMethods(){return{justAnotherApiMethod:()=>{console.log("justAnotherApiMethod")}}}}var s,o,l;class w{constructor({references:e}){c(this,o);c(this,s,void 0);m(this,s,e.ctx)}emitEvent(e,n=null){if(e==null)return;if(e instanceof Event){p(this,o,l).call(this,e);return}const i=new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:n});p(this,o,l).call(this,i)}}s=new WeakMap,o=new WeakSet,l=function(e){x(this,s).getHostElement().dispatchEvent(e)};const I={"api-app":{name:"api-app",services:{TextApiExtension:{name:"TextApiExtension",clazz:M,provides:[{name:"integration.ApiExtension",qualifier:void 0}],references:{textService:{name:"api-app.TextService",qualifier:void 0,all:!1}}},TextService:{name:"TextService",clazz:j,provides:[{name:"api-app.TextService",qualifier:void 0}],references:{}},SecondApiExtension:{name:"SecondApiExtension",clazz:k,provides:[{name:"integration.ApiExtension",qualifier:void 0}],references:{}}},ui:{references:[{name:"api-app.TextService",qualifier:void 0,all:!1},{name:"integration.ExternalEventService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/integration":{name:"@open-pioneer/integration",services:{ExternalEventServiceImpl:{name:"ExternalEventServiceImpl",clazz:w,provides:[{name:"integration.ExternalEventService",qualifier:void 0}],references:{ctx:{name:"runtime.ApplicationContext",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}}},_="",B=[];function H(t){throw new Error(`Unsupported locale: '${t}'`)}const P=g(_),U=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:H,locales:B,packages:I,styles:P},Symbol.toStringTag,{value:"Module"})),V="api-app",E=b.bind(void 0,V);function D(){const t=E("integration.ExternalEventService"),e=()=>{t.emitEvent("my-custom-event",{data:"my-event-data"})},n=E("api-app.TextService"),[i,v]=u.useState("");return u.useEffect(()=>{v(n.getText());const h=n.on("text-changed",S=>{v(S.newText)});return()=>h.destroy()},[n]),r(z,{children:d(C,{children:[r(f,{size:"md",children:"Emitting Events"}),r(y,{children:"Click this button to emit a browser event:"}),r(q,{onClick:e,children:"Emit Event"}),r(f,{size:"md",pt:20,children:"React to api calls from outer site"}),d("div",{children:["Current text: ",i]})]})})}const G=T({component:D,appMetadata:U});customElements.define("api-app",G);
